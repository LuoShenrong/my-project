# my-project
一、项目基础信息
本系统旨在实现远程终端管理功能，面向无特殊技术背景的普通用户 —— 因操作简单、交互性好，用户经几分钟练习即可熟悉使用规则。核心目标是明确系统功能、性能与界面要求，为后续设计开发提供依据
二、核心功能划分与要求
（一）服务器功能
基础配置与账户管理：配置文件（任选）用于存储服务器 IP 和端口（以本地实际为准），供服务器获取配置信息；账户文件（必选）以文本形式保存客户端注册的用户名和密码，需避免用户名重复（注册、登录时均需提示），登录时密码错误达 3 次则强制退出。
连接与数据处理：必选支持多客户端连接，基于 TCP 协议采用多线程实现；需通过链表记录客户端会话连接（含客户端 IP、连接时间、用户名、sock fd），多线程访问链表时用互斥锁、信号量控制，且能动态维护链表（客户端登录插入节点、退出删除节点），同时提供查询显示命令。此外，服务器需接收客户端发送的命令，执行 “ls -l”“pwd”“ipcs”“ifconfig” 等至少 4 类命令，并将结果通过 socket 返回给客户端。
附加功能：日志文件可记录所有客户端连接、命令执行、断开信息（含时间、IP、命令、数据包类型等）；若客户端心跳异常（超过 3 秒间隔且连续 5 个心跳包未接收），需记录状况并断开连接。
（二）客户端功能
身份验证：支持注册功能，客户端提交用户名和密码，经服务器认证（确保用户名不重复）后写入账户文件；登录时需将用户名和密码发送至服务器，服务器从账户文件读取信息验证，同一用户名不可同时登录，登录错误 3 次则退出，验证通过后服务器才接收客户端命令。
通信与状态维护：与服务器间采用心跳机制，客户端每 3 秒发送 1 个心跳包（用 SIGALARM 实现），服务器需显示来自对应 IP 客户端的心跳包；支持聊天功能，可查询在线列表（从服务器链表获取信息），通过 “用户名 + 数据” 的形式与其他客户端进行文字通信。
（三）通信协议
需自定义应用协议封装客户端与服务器间的通信数据，数据包格式包含 int 类型的 data_type（数据包类型）、int 类型的 size（数据大小）、char 类型的 data [1024]（数据内容）。其中 data_type 用宏定义，涵盖登录（TYPE_LOGIN=0）、注册（TYPE_REG=1）、消息（TYPE_MSG=2）、心跳（TYPE_HEART=3）、命令（TYPE_CMD=4）、查看在线用户（TYPE_ONLINE=5）、成功（TYPE_OK=6）、错误（TYPE_ERR=7）等类型。


运行方法：
1.在Linux系统下执行以下指令：  
gcc -o client client_agreement.c client_ui.c client.c -pthread
gcc -o server server_argeement.c thread.c accout.c client_list.c server.c -pthread
用来生成./client和./server两个可执行程序

2.打开两个终端分别执行客户端程序和服务端程序
注意要先执行服务端程序以接收客户端连接


